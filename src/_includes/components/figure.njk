{% set p = figureParams %}

<figure class="figure figure--{{ p.type }}">
    <div class="figure__media">
        {% if not p.src %}
            <!-- FIGURE_ERROR: missing src -->
        {% else %}

            {% if p.src.indexOf("/assets/images/") != 0 %}
                <!-- FIGURE_ERROR: src must be public path under /assets/images/ | src={{ p.src }} -->
            {% endif %}

            {% if p.hasAlt %}
                <img src="{{ p.src }}" alt="{{ p.alt }}" loading="lazy" decoding="async" />
            {% else %}
                <img src="{{ p.src }}" alt="" role="presentation" loading="lazy" decoding="async" />
            {% endif %}

        {% endif %}
    </div>

    {% if p.showCaption and p.caption %}
        <figcaption class="figure__caption">{{ p.caption }}</figcaption>
    {% endif %}
</figure>
